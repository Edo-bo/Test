<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Promo Produk - Spin Kode Promo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    #promoPopupOverlay {
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }
  </style>
</head>
<body class="min-h-screen bg-black bg-cover bg-center" style="background-image: url('https://storage.googleapis.com/a1aa/image/212d8087-65bb-4165-5159-d389f7302193.jpg');">

  <div class="min-h-screen bg-black bg-opacity-70 flex flex-col items-center justify-center p-6 space-y-6">
    <div class="max-w-lg w-full bg-white bg-opacity-90 rounded-lg shadow-lg p-6 text-gray-900">
      <h1 class="text-4xl font-extrabold text-center mb-4 text-red-600 animate-pulse">PROMO SEWA BOT</h1>

      <div class="text-center space-y-2 mb-6">
        <p class="text-xl font-bold">7 HARI: <span id="price-7" class="text-green-600">10.000</span></p>
        <p class="text-xl font-bold">14 HARI: <span id="price-14" class="text-green-600">20.000</span></p>
        <p class="text-xl font-bold">21 HARI: <span id="price-21" class="text-green-600">30.000</span></p>
        <p class="text-xl font-bold">28 HARI: <span id="price-28" class="text-green-600">40.000</span></p>
        <p class="text-xl font-bold">35 HARI: <span id="price-35" class="text-green-600">50.000</span></p>
        <p class="text-xl font-bold">PERMANEN: <span id="price-90" class="text-green-600">90.000</span></p>
      </div>

      <h2 class="text-2xl font-bold mb-3">Keuntungan:</h2>
      <ul class="list-disc list-inside text-gray-800 space-y-2 mb-6">
        <li>Request SC sendiri</li>
        <li>Bisa Nego harga</li>
        <li>1 Sewa = 1 Grup</li>
        <li>Jika Bot di-kick, harus sewa ulang</li>
        <li>Jika Bot terblokir, sewa ulang</li>
      </ul>

      <p class="text-center font-semibold mb-6">
        Hubungi Admin via WhatsApp:
        <a href="https://wa.me/6285955201695" class="text-blue-600 hover:underline" target="_blank">
          Klik di sini <i class="fab fa-whatsapp"></i>
        </a>
      </p>

      <form id="orderForm" class="space-y-4" autocomplete="off">
        <div>
          <label for="product" class="block font-semibold mb-1">Durasi Sewa:</label>
          <select id="product" required class="w-full border rounded p-3 focus:ring-2 focus:ring-blue-500">
            <option value="" disabled selected>Pilih durasi</option>
            <option value="7" data-price="10000">7 Hari - 10.000</option>
            <option value="14" data-price="20000">14 Hari - 20.000</option>
            <option value="21" data-price="30000">21 Hari - 30.000</option>
            <option value="28" data-price="40000">28 Hari - 40.000</option>
            <option value="35" data-price="50000">35 Hari - 50.000</option>
            <option value="90" data-price="90000">Permanen - 90.000</option>
          </select>
        </div>

        <div>
          <label for="botName" class="block font-semibold mb-1">Nama Bot WhatsApp:</label>
          <input id="botName" type="text" required placeholder="Masukkan nama bot" class="w-full border rounded p-3 focus:ring-2 focus:ring-blue-500">
        </div>

        <div>
          <label for="botNumber" class="block font-semibold mb-1">Nomor Bot WhatsApp:</label>
          <input id="botNumber" type="text" required placeholder="Masukkan nomor bot" class="w-full border rounded p-3 focus:ring-2 focus:ring-blue-500">
        </div>

        <div>
          <label for="messageAdmin" class="block font-semibold mb-1">Pesan untuk Admin (Opsional):</label>
          <textarea id="messageAdmin" rows="3" placeholder="Tulis pesanmu..." class="w-full border rounded p-3 focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div>
          <label for="promo" class="block font-semibold mb-1">Kode Promo:</label>
          <input id="promo" type="text" placeholder="Dapatkan dari spin"  class="w-full border rounded p-3 focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="text-gray-800 font-semibold space-y-1">
          <p>Harga Asli: <span id="originalPrice" class="text-green-700">-</span></p>
          <p>Diskon: <span id="discountedPrice" class="text-green-700">-</span></p>
          <p>Biaya Admin: <span id="adminFee" class="text-green-700">5.000</span></p>
          <p class="text-lg">Total Bayar: <span id="totalPrice" class="text-green-700 font-extrabold">-</span></p>
        </div>

        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded transition">
          Kirim Order
        </button>
      </form>
    </div>

    <div class="max-w-lg w-full bg-yellow-400 rounded-lg shadow-lg p-4 text-center hover:bg-yellow-500 transition cursor-pointer">
      <a href="https://whatsapp.com/channel/0029VbAuluK4CrfgyQhHXp45" target="_blank" class="flex justify-center items-center space-x-2">
        <i class="fab fa-whatsapp fa-2x"></i>
        <span class="font-semibold">Gabung Saluran WhatsApp</span>
      </a>
    </div>
  </div>

  <!-- Popup Spin Promo -->
  <div id="promoPopupOverlay" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-sm w-full text-center relative">
      <h2 class="text-2xl font-bold mb-4">Spin Kode Promo!</h2>
      <div id="spinner" class="text-4xl font-bold mb-6">ðŸŽ¡</div>
      <button id="spinButton" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mb-2">
        Spin Sekarang
      </button>
      <button id="closePopup" class="absolute top-2 right-4 text-gray-500 text-2xl font-bold">&times;</button>
    </div>
  </div>

Â  <script>
Â  Â  const productSelect = document.getElementById('product');
Â  Â  const promoInput = document.getElementById('promo');
Â  Â  const originalPriceEl = document.getElementById('originalPrice');
Â  Â  const discountedPriceEl = document.getElementById('discountedPrice');
Â  Â  const adminFeeEl = document.getElementById('adminFee');
Â  Â  const totalPriceEl = document.getElementById('totalPrice');
Â  Â  const orderForm = document.getElementById('orderForm');

Â  Â  const adminFee = 5000;
Â  Â  const promoCodesList = [
Â  { code: "U5YENM", discount: 14500 },
Â  { code: "GDMCF2", discount: 5500 },
Â  { code: "QI40KY", discount: 5000 },
Â  { code: "0RSL1U", discount: 9000 },
Â  { code: "08DKII", discount: 2500 },
Â  { code: "YH3V0O", discount: 12000 },
Â  { code: "O7FX9T", discount: 2500 },
Â  { code: "1V3S51", discount: 9500 },
Â  { code: "0RMOLX", discount: 7500 },
Â  { code: "Z3AH4N", discount: 5000 },
Â  { code: "KKC0L2", discount: 600000 }
];

Â  Â  // Store if user already spun promo code (only once)
Â  Â  const promoSpinKey = "promoSpinDone";

Â  Â  // Variables for popup
Â  Â  const promoPopupOverlay = document.getElementById('promoPopupOverlay');
Â  Â  const spinButton = document.getElementById('spinButton');
Â  Â  const spinner = document.getElementById('spinner');
Â  Â  const closePopup = document.getElementById('closePopup');

Â  Â  // Format number with dot thousand separator
Â  Â  function formatPrice(num) {
Â  Â  Â  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
Â  Â  }

Â  Â  // Show popup if not spun yet
Â  Â  window.addEventListener('load', () => {
Â  Â  Â  if (!localStorage.getItem(promoSpinKey)) {
Â  Â  Â  Â  promoPopupOverlay.classList.remove('hidden');
Â  Â  Â  Â  promoPopupOverlay.classList.add('flex');
Â  Â  Â  } else {
Â  Â  Â  Â  calculatePrices();
Â  Â  Â  }
Â  Â  });

Â  Â  // Spin animation variables
Â  Â  let spinInterval;
Â  Â  let spinIndex = 0;

Â  Â  function startSpin() {
Â  Â  Â  spinButton.disabled = true;
Â  Â  Â  spinIndex = 0;
Â  Â  Â  spinInterval = setInterval(() => {
Â  Â  Â  Â  spinner.textContent = promoCodesList[spinIndex].code;
Â  Â  Â  Â  spinIndex = (spinIndex + 1) % promoCodesList.length;
Â  Â  Â  }, 100);
Â  Â  }

Â  Â  function stopSpin() {
Â  Â  Â  clearInterval(spinInterval);
Â  Â  Â  // Pick random promo code
Â  Â  Â  const randomIndex = Math.floor(Math.random() * promoCodesList.length);
Â  Â  Â  const selectedPromo = promoCodesList[randomIndex];
Â  Â  Â  spinner.textContent = selectedPromo.code;
Â  Â  Â  promoInput.value = selectedPromo.code;
Â  Â  Â  localStorage.setItem(promoSpinKey, selectedPromo.code);
Â  Â  Â  promoPopupOverlay.classList.add('hidden');
Â  Â  Â  promoPopupOverlay.classList.remove('flex');
Â  Â  Â  calculatePrices();
Â  Â  }

Â  Â  spinButton.addEventListener('click', () => {
Â  Â  Â  startSpin();
Â  Â  Â  setTimeout(stopSpin, 3000); // spin for 3 seconds
Â  Â  });

Â  Â  closePopup.addEventListener('click', () => {
Â  Â  Â  promoPopupOverlay.classList.add('hidden');
Â  Â  Â  promoPopupOverlay.classList.remove('flex');
Â  Â  Â  localStorage.setItem(promoSpinKey, "NO_PROMO");
Â  Â  Â  promoInput.value = "";
Â  Â  Â  calculatePrices();
Â  Â  });

Â  Â  function calculatePrices() {
Â  Â  Â  const selectedOption = productSelect.options[productSelect.selectedIndex];
Â  Â  Â  if (!selectedOption || !selectedOption.dataset.price) {
Â  Â  Â  Â  originalPriceEl.textContent = "-";
Â  Â  Â  Â  discountedPriceEl.textContent = "-";
Â  Â  Â  Â  totalPriceEl.textContent = "-";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  let basePrice = parseInt(selectedOption.dataset.price, 10);
Â  Â  Â  let promoCode = promoInput.value.trim().toUpperCase();

Â  Â  Â  originalPriceEl.textContent = formatPrice(basePrice);

Â  Â  Â  let discountedPrice = basePrice;

Â  Â  Â  // Find promo code discount from list
Â  Â  Â  const promoObj = promoCodesList.find(p => p.code === promoCode);

Â  Â  Â  if (promoObj) {
Â  Â  Â  Â  let discount = promoObj.discount;
Â  Â  Â  Â  if (discount > basePrice) discount = basePrice;
Â  Â  Â  Â  discountedPrice = basePrice - discount;
Â  Â  Â  }

Â  Â  Â  discountedPriceEl.textContent = formatPrice(discountedPrice);

Â  Â  Â  const total = discountedPrice + adminFee;
Â  Â  Â  totalPriceEl.textContent = formatPrice(total);
Â  Â  }

Â  Â  productSelect.addEventListener('change', calculatePrices);

Â  Â  let orderCount = parseInt(localStorage.getItem('orderCount')) || 0;
const botToken = '7834102551:AAE60SlE4kLVdh4gmpPHL7SDUFQddZ0Jxiw';
const chatId = '7412906249';
const photoUrl = 'https://img1.pixhost.to/images/5329/592816072_rizzhosting.jpg';

orderForm.addEventListener('submit', function(e) {
  e.preventDefault();

  const botName = document.getElementById('botName').value.trim();
  const botNumber = document.getElementById('botNumber').value.trim();
  const messageAdmin = document.getElementById('messageAdmin').value.trim();
  const promoCode = promoInput.value.trim().toUpperCase();
  const selectedOption = productSelect.options[productSelect.selectedIndex];

if (!botName || !botNumber || !selectedOption.value) {
  alert("Mohon lengkapi semua data wajib diisi.");
  return;
}

if (!/^\d+$/.test(botNumber)) {
  alert("Nomor WhatsApp harus berupa angka saja tanpa spasi atau huruf.");
  return;
}

  let basePrice = parseInt(selectedOption.dataset.price, 10);
  let discountedPrice = basePrice;
  const promoObj = promoCodesList.find(p => p.code === promoCode);

  if (promoObj) {
    let discount = promoObj.discount;
    if (discount > basePrice) discount = basePrice;
    discountedPrice = basePrice - discount;
  }

  const total = discountedPrice + adminFee;

  // Buat ID Order
  const today = new Date();
  const day = String(today.getDate()).padStart(2, '0');
  const month = String(today.getMonth() + 1).padStart(2, '0'); // bulan 0-11
  const idDate = `${day}${month}`;
  
  orderCount += 1;
  localStorage.setItem('orderCount', orderCount);

  const orderId = `${idDate}-${String(orderCount).padStart(3, '0')}`;

  // Pesan Order
  let message = `ðŸ§¾ *ORDERAN MASUK*\n\n`;
  message += `ðŸ†” ID ORDER : *${orderId}*\n`;
  message += `â€¢ Nama Bot WhatsApp : ${botName}\n`;
  message += `â€¢ Nomor Bot WhatsApp : ${botNumber}\n`;
  message += `â€¢ Pesan untuk admin : ${messageAdmin || "-"}\n`;
  message += `â€¢ Kode Promo : ${promoCode || "-"}\n\n`;
  message += `Harga Asli : Rp ${formatPrice(basePrice)}\n`;
  message += `Harga Setelah Diskon : Rp ${formatPrice(discountedPrice)}\n`;
  message += `Biaya Admin : Rp ${formatPrice(adminFee)}\n`;
  message += `*TOTAL SEMUA : Rp ${formatPrice(total)}*`;

  // 1. Kirim foto dulu
  fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      chat_id: chatId,
      photo: photoUrl,
      caption: `ðŸ§¾ ORDERAN MASUK\nID ORDER : ${orderId}`
    })
  })
  .then(response => response.json())
  .then(data => {
    if (data.ok) {
      // 2. Baru kirim teks
      return fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: chatId,
          text: message,
          parse_mode: 'Markdown'
        })
      });
    } else {
      alert('Gagal mengirim foto.');
      console.error('SendPhoto Error:', data);
    }
  })
  .then(response => response.json())
  .then(data => {
    if (data && data.ok) {
      alert('ORDER BERHASIL TERKIRIM');
      orderForm.reset();
      promoInput.value = "";
      localStorage.removeItem('promoSpinDone');
      calculatePrices();
    } else {
      alert('Gagal mengirim pesan order.');
      console.error('SendMessage Error:', data);
    }
  })
  .catch(error => {
    alert('Terjadi kesalahan saat mengirim order.');
    console.error('Fetch Error:', error);
  });

});

Â  </script>
</body>
</html>
